import React, { FC, useEffect, useState } from 'react';
import {
  childWrapperClass,
  createClass,
  importClass,
  wrapperClass,
} from './style.css';

export interface IChildProps {
  playCreateAnimation: boolean;
  playImportAnimation: boolean;
}
interface IProps {
  disableCreateButton?: boolean;
  disableImportButton?: boolean;
  animateImport?: boolean;
  animateCreate?: boolean;
  onImportClick?: () => void;
  onCreateClick?: () => void;
  Child: FC<IChildProps>;
}

export const WalletAnimation: FC<IProps> = ({
  disableCreateButton = false,
  disableImportButton = false,
  animateImport = false,
  animateCreate = false,
  onImportClick,
  onCreateClick,
  Child,
}) => {
  const [hoveredImport, setHoveredImport] = useState(false);
  const [hoveredCreate, setHoveredCreate] = useState(false);

  useEffect(() => {
    setHoveredImport(animateImport);
  }, [animateImport]);

  useEffect(() => {
    setHoveredCreate(animateCreate);
  }, [animateCreate]);

  return (
    <svg
      className={wrapperClass}
      width="100%"
      viewBox="0 0 400 300"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <g className={childWrapperClass}>
        {
          <Child
            playImportAnimation={hoveredImport}
            playCreateAnimation={hoveredCreate}
          />
        }
      </g>
      <g
        id="create"
        className={createClass}
        data-isDisabled={disableCreateButton}
        onMouseEnter={() => setHoveredCreate(true)}
        onMouseLeave={() => setHoveredCreate(false)}
        onClick={onCreateClick && onCreateClick}
      >
        <rect x="308" y="126" width="48" height="48" rx="6" fill="white" />
        <path
          id="create-icon"
          d="M330.6 162.364C330.022 162.364 329.565 161.876 329.602 161.299L329.953 155.867C330.007 155.04 329.088 154.51 328.399 154.972L323.845 158.022C323.362 158.345 322.706 158.19 322.419 157.685L320.526 154.351C320.241 153.849 320.439 153.211 320.958 152.958L325.838 150.581C326.588 150.216 326.588 149.148 325.838 148.783L320.958 146.405C320.439 146.153 320.241 145.514 320.526 145.013L322.419 141.679C322.706 141.174 323.362 141.019 323.845 141.342L328.399 144.392C329.088 144.853 330.007 144.324 329.953 143.497L329.602 138.064C329.565 137.488 330.022 137 330.6 137H334.387C334.965 137 335.423 137.49 335.384 138.067L335.02 143.49C334.964 144.319 335.884 144.85 336.574 144.388L341.123 141.342C341.606 141.019 342.262 141.174 342.549 141.679L344.442 145.014C344.727 145.515 344.529 146.153 344.011 146.406L339.145 148.783C338.397 149.149 338.397 150.215 339.145 150.58L344.011 152.958C344.529 153.211 344.727 153.849 344.442 154.35L342.549 157.685C342.262 158.19 341.606 158.345 341.123 158.022L336.574 154.975C335.884 154.513 334.964 155.045 335.02 155.873L335.384 161.297C335.423 161.874 334.965 162.364 334.387 162.364H330.6Z"
          fill="black"
        />
      </g>
      <g
        id="import"
        className={importClass}
        data-isDisabled={disableImportButton}
        onMouseEnter={() => setHoveredImport(true)}
        onMouseLeave={() => setHoveredImport(false)}
        onClick={onImportClick && onImportClick}
      >
        <rect x="44" y="126" width="48" height="48" rx="6" fill="white" />
        <g id="import-icon">
          <path
            d="M77.9413 138.078C77.8113 138.078 77.6813 138.046 77.5675 137.983C74.4475 136.415 71.75 135.75 68.5163 135.75C65.2988 135.75 62.2438 136.494 59.465 137.983C59.075 138.188 58.5875 138.046 58.36 137.666C58.1492 137.281 58.2937 136.802 58.685 136.589C61.7075 134.99 65.0225 134.167 68.5163 134.167C71.9775 134.167 75 134.911 78.315 136.573C78.7213 136.779 78.8675 137.254 78.6563 137.634C78.5251 137.903 78.2472 138.076 77.9413 138.078Z"
            fill="black"
          />
          <path
            d="M54.6875 146.39C54.2396 146.394 53.8732 146.044 53.8691 145.607C53.8675 145.44 53.9208 145.275 54.0212 145.139C55.63 142.923 57.6775 141.181 60.115 139.962C65.2175 137.397 71.75 137.381 76.8687 139.946C79.3062 141.165 81.3537 142.891 82.9625 145.092C83.2233 145.447 83.1385 145.942 82.7733 146.196C82.7714 146.197 82.7694 146.199 82.7675 146.2C82.3937 146.453 81.89 146.374 81.63 146.01C80.207 144.047 78.3166 142.45 76.1212 141.355C71.4575 139.028 65.4937 139.028 60.8462 141.371C58.6362 142.479 56.7837 144.063 55.3212 146.058C55.1912 146.279 54.9475 146.39 54.6875 146.39Z"
            fill="black"
          />
          <path
            d="M64.8437 165.501C64.6283 165.503 64.4217 165.417 64.275 165.263C62.8612 163.886 62.0975 162.999 61.0087 161.083C59.8875 159.136 59.3025 156.761 59.3025 154.212C59.3025 149.509 63.43 145.678 68.5 145.678C73.57 145.678 77.6975 149.509 77.6975 154.212C77.6975 154.655 77.34 155.003 76.885 155.003C76.43 155.003 76.0725 154.655 76.0725 154.212C76.0725 150.38 72.6762 147.261 68.5 147.261C64.3237 147.261 60.9275 150.38 60.9275 154.212C60.9275 156.492 61.4475 158.598 62.4387 160.308C63.4787 162.128 64.1937 162.904 65.445 164.139C65.7537 164.456 65.7537 164.947 65.445 165.263C65.2662 165.422 65.055 165.501 64.8437 165.501Z"
            fill="black"
          />
          <path
            d="M76.495 162.572C74.5612 162.572 72.855 162.097 71.4575 161.162C69.0362 159.563 67.59 156.967 67.59 154.212C67.59 153.768 67.9475 153.42 68.4025 153.42C68.8575 153.42 69.215 153.768 69.215 154.212C69.215 156.444 70.385 158.55 72.3675 159.848C73.5212 160.608 74.87 160.972 76.495 160.972C76.885 160.972 77.535 160.925 78.185 160.814C78.6237 160.735 79.0462 161.02 79.1275 161.463C79.2087 161.891 78.9162 162.302 78.4612 162.382C77.535 162.556 76.7225 162.572 76.495 162.572Z"
            fill="black"
          />
          <path
            d="M73.2288 165.833C73.1637 165.833 73.0825 165.818 73.0175 165.802C70.4338 165.105 68.7438 164.171 66.9725 162.477C64.7051 160.295 63.4342 157.316 63.4463 154.212C63.4463 151.647 65.6888 149.557 68.4513 149.557C71.2138 149.557 73.4563 151.647 73.4563 154.212C73.4563 155.906 74.9675 157.283 76.8362 157.283C78.705 157.283 80.2162 155.906 80.2162 154.212C80.2162 148.243 74.935 143.398 68.435 143.398C63.82 143.398 59.595 145.899 57.6938 149.778C57.06 151.061 56.735 152.565 56.735 154.212C56.735 155.447 56.8488 157.394 57.8238 159.928C57.9863 160.339 57.775 160.798 57.3525 160.941C56.93 161.099 56.4588 160.878 56.3125 160.482C55.5294 158.479 55.1276 156.355 55.1263 154.212C55.1263 152.312 55.5 150.586 56.2313 149.082C58.3925 144.664 63.1863 141.798 68.435 141.798C75.8288 141.798 81.8412 147.356 81.8412 154.196C81.8412 156.761 79.5987 158.851 76.8362 158.851C74.0737 158.851 71.8313 156.761 71.8313 154.196C71.8313 152.502 70.32 151.124 68.4513 151.124C66.5825 151.124 65.0713 152.502 65.0713 154.196C65.0713 156.903 66.1438 159.437 68.11 161.337C69.6538 162.825 71.1325 163.648 73.4238 164.266C73.8625 164.377 74.1063 164.82 73.9925 165.232C73.9113 165.596 73.57 165.833 73.2288 165.833Z"
            fill="black"
          />
        </g>
      </g>
    </svg>
  );
};
